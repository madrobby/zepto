<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Zepto unit tests</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="../zepto.js"></script>
  <script src="evidence.js"></script>
</head>
<body>
  <h1>Zepto unit tests</h1>
  <p>
    See the browser console for results.
  </p>
  <div id="some_element"></div>
  <p>
    <span class="yay">yay</span>
    <span></span>
    <span class="nay" id="nay">nay</span>
  </p>
  <div id="attrElement" data-id="someId" data-name="someName"></div>
  <div id="attrElement2" data-id="someId" data-name="someName"></div>
  <script>  
    Evidence.TestCase.extend('ZeptoTest', {
      
      testDollar: function(t){
        t.assert($('#some_element').get().length == 1);
        t.assert($('#some_element').get(0) == document.getElementById('some_element'));
        
        t.assert($('span').get().length == 3);
        t.assert($('p>span.yay').get().length == 1);      
      },
      
      testCSS: function(t){
        var el = $('#some_element').get(0);
        
        $('#some_element').css('color:#f00;border:1px solid rgba(255,0,0,1)');
        t.assertEqual('rgb(255, 0, 0)', el.style.color);
        t.assertEqual('rgb(255, 0, 0)', el.style.borderLeftColor);
        t.assertEqual('1px', el.style.borderLeftWidth);
      },
      
      testChaining: function(t){
        t.assert(document.getElementById('nay').innerHTML == "nay");
        $('span.nay').css('color:red').html('test');
        t.assert(document.getElementById('nay').innerHTML == "test");
      },
      
      testCachingForLater: function(t){
        var one = $('div');
        var two = $('span');
        
        t.assert(one.get(0) !== two.get(0));
      },
      
      testPlugins: function(t){
        var el = $('#some_element').get(0);
        
        $.fn.plugin = function(){
          return this(function(el){ el.innerHTML = 'plugin!' });
        };
        $('#some_element').plugin();
        t.assertEqual('plugin!', el.innerHTML);
      },

      testAttributes: function(t){
	var _el=$('#attrElement,#attrElement2');
        t.assertEqual('someId', _el.attr("data-id")); //original
        t.assertEqual('someName', _el.attr("data-name"));//original
        _el.attr("data-id","someOtherId");//new attribute
        _el.attr("data-name","someOtherName");//new attribute
        t.assertEqual('someOtherId', _el.attr("data-id"));//test new attribute has been set
        t.assertEqual('someOtherName', _el.attr("data-name"));//test new attribute has been set
        t.assertEqual(undefined,_el.attr("nonExistentAttribute"));//test non-existent attribute returns undefined
      }

    });
  </script>
</body>
</html>
